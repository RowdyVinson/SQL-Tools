--Add Operators for alerts

-- Replace @DOMAINNAME.com and smtp-SERVER.domain.local with your internal email domain and the fqdn of an accessible smtp server respectively.
-- Ensure the Distribution lists are present "DL-IT-Alert-SQLBackups@DOMAINNAME.com" and "DL-IT-Alert-SQLMaintenance@DOMAINNAME.com"

USE [msdb] 
GO 

DECLARE @server_email NVARCHAR (128)

SET @server_email = 'DL-IT-ALERT-' + @@SERVERNAME + '@DOMAINNAME.com' 


EXEC msdb.dbo.sp_add_operator @name=N'JobAlerts', 
                @enabled=1, 
                @pager_days=0, 
                @email_address=@server_email 

EXEC msdb.dbo.sp_add_operator @name=N'SQLBackups', 
		@enabled=1, 
		@pager_days=0, 
		@email_address=N'DL-IT-Alert-SQLBackups@DOMAINNAME.com'

EXEC msdb.dbo.sp_add_operator @name=N'SQLMaintenance', 
		@enabled=1, 
		@pager_days=0, 
		@email_address=N'DL-IT-Alert-SQLMaintenance@DOMAINNAME.com'
GO
